/**
 * ==============================
 * LESSON: Type Guards
 * ==============================
 * Cũng là một function, nó trả về kết quả để xác
 * định kiểu của Object.
 */

class APIErrorResponse {
  constructor(public errorCode: number, public message: string) {}
}
class APISuccessResponse {
  public data;
  constructor(data: any) {
    this.data = data;
  }
}
type Responses = APIErrorResponse | APISuccessResponse;

function getResponse(): Responses {
  if (Math.random() > 0.5) {
    return new APISuccessResponse({ success: "OK" });
  }
  return new APIErrorResponse(404, "Not Found");
}

function isErrorResponse(obj: Responses): obj is APIErrorResponse {
  return obj instanceof APIErrorResponse;
}

const res = getResponse(); // { success: "OK" } | 404, "Not Found"

if (isErrorResponse(res)) {
  console.error("Error Code:", res.errorCode, "Message:", res.message);
} else {
  console.log("Data:", res.data);
}
